#include "fastSine.h"

// Main sine lookup table
// SINE_MAX == 2^SINE_POWER == 2^14 == 16384
// sin() == sineTable[index] / SINE_MAX == sineTable[index] >> SINE_POWER
const int16_t sineTable[SINE_VAL_COUNT] = {
     0,    803,   1605,   2404,   3196,   3980,   4756,   5519,
  6269,   7005,   7723,   8423,   9102,   9759,  10393,  11002,
 11585,  12139,  12665,  13159,  13622,  14053,  14449,  14810,
 15136,  15426,  15678,  15892,  16069,  16206,  16305,  16364,
 16384,  16364,  16305,  16206,  16069,  15892,  15678,  15426,
 15136,  14810,  14449,  14053,  13622,  13159,  12665,  12139,
 11585,  11002,  10393,   9759,   9102,   8423,   7723,   7005,
  6269,   5519,   4756,   3980,   3196,   2404,   1605,    803,
     0,   -803,  -1605,  -2404,  -3196,  -3980,  -4756,  -5519,
 -6269,  -7005,  -7723,  -8423,  -9102,  -9759, -10393, -11002,
-11585, -12139, -12665, -13159, -13622, -14053, -14449, -14810,
-15136, -15426, -15678, -15892, -16069, -16206, -16305, -16364,
-16384, -16364, -16305, -16206, -16069, -15892, -15678, -15426,
-15136, -14810, -14449, -14053, -13622, -13159, -12665, -12139,
-11585, -11002, -10393,  -9759,  -9102,  -8423,  -7723,  -7005,
 -6269,  -5519,  -4756,  -3980,  -3196,  -2404,  -1605,   -803
};
/*
 ^
 |SINE_MAX                       *
 |                       *       ^        *
 |                  *                           *
 |              *                ^                  *
 |           *                                         *
 |        *                      ^                        *
 |     *                                                    *
 |   *                           ^                            *                                                                   SINE_VAL_COUNT
 | *                                                            *                                                                 v
-*----------------------------------------------------------------*---------------------------------------------------------------*-------------->
 |                               ^                                ^ *                                                            *           index
 |                                                                    *                                                        *
 |                               ^                                ^     *                                                    *
 |                                                                         *                                              *
 |                               ^                                ^           *                                        *
 |                                                                               *                                  *
 |                               ^                                ^                  *                          *
 |                                                                                        *                *
 |-SINE_MAX                      ^                                ^                               *                                  Microstep     | Index points per sine | StepperMotor::stepToSineArrayFactor
 |                               ^                                ^                               ^                               ^    1 Full step |   4                   | 32
 |               ^               ^                ^               ^               ^               ^               ^               ^  1/2 Half step |   8                   | 16
 |       ^       ^       ^       ^        ^       ^       ^       ^       ^       ^       ^       ^       ^       ^       ^       ^  1/4 Microstep |  16                   |  8
 |   ^   ^   ^   ^   ^   ^   ^   ^    ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^   ^  1/8           |  32                   |  4
 | ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^  ^ 1/16           |  64                   |  2
 |^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 1/32           | 128==SINE_VAL_COUNT   |  1

In 1/32 microstep mode,  every sine wave index point is used. (0, 1, 2, ..., 127, 128==0, ...)
In full step mode, only 4 index points of  sine wave are used. (0, 1/2 pi, pi, 3/2pi, 2pi, ...) == (0, 32, 64, 96, 128==0, ...)
The rest of the modes are in between them.

Microstep  |Frequency of input | Shaft, | Number of input | Number of shaft
divider    | pulses, Hz        |   RPM  | pulses          | rotations
      1    |        200        |    60  |     200 * N     |     N
      2    |        400        |    60  |     400 * N     |     N
      4    |        800        |    60  |     800 * N     |     N
      8    |       1600        |    60  |    1600 * N     |     N
     16    |       3200        |    60  |    3200 * N     |     N
     32    |       6400        |    60  |    6400 * N     |     N
The N is a natural number, 1,2,3,4,5,......
*/
